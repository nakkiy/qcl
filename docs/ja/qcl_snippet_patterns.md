
# âœ… ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³è¨­è¨ˆæ›¸

---

## âœ… 1. æ¦‚è¦

ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ã€YAMLãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚ŒãŸã‚³ãƒžãƒ³ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚ã‚Šã€`qcl` ã®ã‚³ã‚¢ã¨ãªã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã™ã€‚  
ãã®ä¸­ã«å®šç¾©ã•ã‚Œã‚‹ **ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€** ã«ã‚ˆã‚Šã€å‹•çš„ãªå€¤ã®åŸ‹ã‚è¾¼ã¿ã‚„å¤–éƒ¨æƒ…å ±ã®å–å¾—ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## âœ… 2. ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€è¨˜æ³•ã®åŸºæœ¬æ§‹æ–‡

```
[[name=default from:"command" select:N order:N]]
```

| è¦ç´          | èª¬æ˜Ž                                                                       |
|--------------|----------------------------------------------------------------------------|
| `name`       | ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€åï¼ˆå¿…é ˆï¼‰                                                   |
| `=default`   | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆçœç•¥å¯èƒ½ï¼‰                                                  |
| `from:"command"` | å€¤ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®å¤–éƒ¨ã‚³ãƒžãƒ³ãƒ‰ã€ã¾ãŸã¯ functionï¼ˆçœç•¥å¯èƒ½ï¼‰             |
| `select:N`   | å¤–éƒ¨ã‚³ãƒžãƒ³ãƒ‰ã®å‡ºåŠ›ãŒè¤‡æ•°åˆ—ã‚ã‚‹å ´åˆã€ä½•åˆ—ç›®ã‚’å€¤ã¨ã—ã¦å–å¾—ã™ã‚‹ã‹ï¼ˆ0-basedï¼‰ |
| `order:N`    | ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›/é¸æŠžã‚’ä¿ƒã™é †ç•ªã‚’åˆ¶å¾¡ï¼ˆçœç•¥å¯èƒ½ã€è‡ªå‹•é †ã‚‚å¯ï¼‰                |

---

## âœ… 3. ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§

### ðŸŽ¯ 3.1 å˜ç´”å…¥åŠ›ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€
#### âœ… æ§‹æ–‡
```
[[name]]
```
#### âœ… ä¾‹
```yaml
command: "echo Hello, [[name]]!"
```
#### âœ… è§£èª¬
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã« `name` ã®å€¤ã‚’å…¥åŠ›ã•ã›ã‚‹ã€‚
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãªã—ã€‚

---

### ðŸŽ¯ 3.2 ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä»˜ãå…¥åŠ›
#### âœ… æ§‹æ–‡
```
[[name=default]]
```
#### âœ… ä¾‹
```yaml
command: "echo Hello, [[name=world]]!"
```
#### âœ… è§£èª¬
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ `world` ã‚’è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã§ãã‚‹ã€‚

---

### ðŸŽ¯ 3.3 å¤–éƒ¨ã‚³ãƒžãƒ³ãƒ‰ã‹ã‚‰é¸æŠž
#### âœ… æ§‹æ–‡
```
[[name from:"command" select:N]]
```
#### âœ… ä¾‹
```yaml
command: >
  docker exec -it [[container_id from:"docker ps --format '{{.ID}} {{.Names}}'" select:0]] /bin/bash
```
#### âœ… è©³ç´°ãªè§£èª¬
- `docker ps --format '{{.ID}} {{.Names}}'` ã‚’å®Ÿè¡Œã—ã€çµæžœã®å„è¡Œã‚’å€™è£œã¨ã—ã¦è¡¨ç¤ºã™ã‚‹ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä¸€è¦§ã‹ã‚‰è¡Œã‚’é¸æŠžã™ã‚‹ã€‚
  ```
  [0] 3e1a57c1234 nginx-container
  [1] a9bf21d9876 redis-server
  ```
- é¸ã‚“ã è¡Œã® **select:N** ã«æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ç•ªå·ã®å€¤ãŒã€`container_id` ã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ã€‚  
  â†’ ãŸã¨ãˆã° `select:0` ãªã‚‰ `a9bf21d9876` ãŒã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã€‚

#### âœ… å…¸åž‹çš„ãªç”¨é€”
- Dockerã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§ã‹ã‚‰é¸æŠž
- Kubernetes Podä¸€è¦§ã‹ã‚‰é¸æŠž
- SSHå…ˆãƒ›ã‚¹ãƒˆä¸€è¦§ã‹ã‚‰é¸æŠž

---

### ðŸŽ¯ 3.4 order æŒ‡å®šä»˜ã
#### âœ… æ§‹æ–‡
```
[[name order:N]]
```
#### âœ… ä¾‹
```yaml
command: "ssh [[user order:2]]@[[host order:1]]"
```
#### âœ… è§£èª¬
- `host` ãŒå…ˆã«ã€`user` ãŒå¾Œã«è§£æ±ºã•ã‚Œã‚‹ï¼ˆè¡¨ç¤ºé †åˆ¶å¾¡ï¼‰ã€‚
- å®Ÿè¡Œæ™‚ã®å…¥åŠ›é †ç•ªã‚’æ„å›³çš„ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã€‚

---

### ðŸŽ¯ 3.5 function ã«ã‚ˆã‚‹è¤‡æ•°ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€è§£æ±º
#### âœ… æ§‹æ–‡
```
[[var from:function]]
```
#### âœ… ä¾‹
```yaml
command: |
  ssh [[user from:function]]@[[host from:function]]
function:
  from: >
    awk '$1 == "Host" {
            if (host != "" && hostname != "" && user != "")
                print host, hostname, user
            host=$2; hostname=""; user=""
          }
          $1 == "Hostname" {hostname=$2}
          $1 == "User" {user=$2}
          END {
            if (host != "" && hostname != "" && user != "")
                print host, hostname, user
          }' ~/.ssh/config
  select:
    user: 2
    host: 1
```
#### âœ… è§£èª¬
- `function` ã«å®šç¾©ã•ã‚ŒãŸã‚³ãƒžãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã€ãã®çµæžœã‚’è¤‡æ•°ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã«ãƒžãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã€‚
- `select` ã§å„ã‚«ãƒ©ãƒ ã®ã©ã®å€¤ã‚’ `user`ã€`host` ã«ãƒžãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã‹ã‚’å®šç¾©ã€‚

---

### ðŸŽ¯ 3.6 è¤‡æ•°ã®é¸æŠžè‚¢ã¨ function æ··åœ¨ãƒ‘ã‚¿ãƒ¼ãƒ³
```yaml
snippets:
  - name: multi-source
    command: "ssh [[user=ubuntu]]@[[host from:"gcloud compute instances list --format 'value(NAME)'" select:0]]"
```
#### âœ… è§£èª¬
- `user` ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ `ubuntu`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å¯ï¼‰  
- `host` ã¯ `gcloud compute instances list` ã®çµæžœã‹ã‚‰é¸æŠž

---

## âœ… 4. ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€æ§‹æ–‡ãƒ«ãƒ¼ãƒ«ã¾ã¨ã‚

| ãƒ«ãƒ¼ãƒ«                | èª¬æ˜Ž                                                 |
|-----------------------|------------------------------------------------------|
| name ã¯å¿…é ˆ           | å¤‰æ•°åã‚’å¿…ãšæŒ‡å®šã™ã‚‹ï¼ˆçœç•¥ä¸å¯ï¼‰                     |
| ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯çœç•¥å¯   | `=` ãŒãªã‘ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãªã—ï¼ˆç©ºæ–‡å­—ï¼‰             |
| from ãŒã‚ã‚Œã°é¸æŠžå¼    | `from:"command"` ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã¯é¸æŠžå¼UIãŒå‘¼ã°ã‚Œã‚‹ |
| select ãŒã‚ã‚Œã°ã‚«ãƒ©ãƒ é¸æŠž | 0-based ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§åˆ—æŒ‡å®š                       |
| order ã¯ä»»æ„          | æ˜Žç¤ºã—ãªã„å ´åˆã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã®å‡ºç¾é †ã§è§£æ±ºã•ã‚Œã‚‹   |

---

## âœ… 5. ã‚¹ãƒ‹ãƒšãƒƒãƒˆ YAML ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹

```yaml
snippets:
  - name: example
    command: "echo Hello, [[name=world]]!"

  - name: ssh-login-host
    command: "ssh [[user order:2]]@[[host order:1]]"

  - name: docker-exec
    command: |
      docker exec -it [[container_id from:"docker ps --format '{{.ID}} {{.Names}}'" select:0]] /bin/bash

  - name: ssh-login-user@hostname
    command: |
      ssh [[user from:function]]@[[host from:function]]
    function:
      from: >
        awk '$1 == "Host" {
                if (host != "" && hostname != "" && user != "")
                    print host, hostname, user
                host=$2; hostname=""; user=""
              }
              $1 == "Hostname" {hostname=$2}
              $1 == "User" {user=$2}
              END {
                if (host != "" && hostname != "" && user != "")
                    print host, hostname, user
              }' ~/.ssh/config
      select:
        user: 2
        host: 1
```
